<html>
<head>
<title>Joinのアルゴリズム</title>
</head>
<body>
<a href="../index.html">一覧に戻る</a><br/>
<br/>

<b>Joinのアルゴリズム</b><br/>
<br/>
■Joinのアルゴリズム<br/>
<br/>
　●Nested Loop<br/>
　　<br/>
　　外部表にある全行に対して、内部表から結合キー列の値がマッチするものを探して結合する<br/>
　　上記に関連して、外部表にあるレコードが少ないほうがループ数を少なくできるため高速にできる<br/>
　　内部表の結合キー列にインデックスがある場合、インデックスを用いて検索できるため高速に処理できる<br/>
<br/>
　●Sort/Merge<br/>
<br/>
　　外部表と内部表を結合キー列でソートする<br/>
　　ソートしたあとに上から結合キー列が一致するものを結合する。(それぞれの値をインクリメントしつつ比較)<br/>
　　インデックスなしのNested Loop Joinより高速になる<br/>
　　ソートが重い処理になりがちなので、インデックスがあると高速化が見込める<br/>
　　Hash Joinと違って不等価結合でも使える<br/>
<br/>
　●Hash<br/>
<br/>
　　手順<br/>
　　　1.オプティマイザが結合する表の件数を比較して、小さい方の表を全件読み取る<br/>
　　　2.で選択された表の結合条キー列の値をハッシュ関数にかけてハッシュテーブルを作成する<br/>
　　　3.外部表の結合キー列を同じハッシュ関数で変換->作成したハッシュテーブルを検索。ハッシュが同じ列同士を結合する<br/>
<br/>
　　特徴<br/>
　　　結合キー列にインデックスがなくても高速に結合できる<br/>
　　　対象件数が増えても結合の負荷が増えにくい（が、ハッシュ表を作成・保存できるだけのメモリは必要）<br/>
　　　ハッシュ関数で処理する都合上、等価結合(=)の場合のみ使用可能<br/>
<br/>
<br/>


<a href="../index.html">一覧に戻る</a><br/>
</body>
</html>